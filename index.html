<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Monkey Tag Online</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#000;overflow:hidden;font-family:'Courier New',monospace;cursor:default;}
canvas{display:block;position:fixed;top:0;left:0;}
body.ingame{user-select:none;}
#menu-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:300;background:rgba(0,0,0,0.65);touch-action:auto;}
#menu-box{background:rgba(6,14,6,0.99);border:2px solid #00ff44;border-radius:8px;width:min(400px,95vw);max-height:88vh;display:flex;flex-direction:column;box-shadow:0 0 60px rgba(0,255,68,0.3);overflow:hidden;touch-action:auto;}
#menu-title{padding:18px 24px 0;text-align:center;}
#menu-title h1{font-size:clamp(1.4rem,5vw,2rem);font-weight:900;letter-spacing:.1em;color:#00ff44;text-shadow:0 0 30px #00ff44;text-transform:uppercase;margin-bottom:3px;}
#menu-title .sub{color:#335533;font-size:.66rem;letter-spacing:.28em;text-transform:uppercase;margin-bottom:10px;}
#tab-bar{display:flex;border-bottom:2px solid #1a331a;flex-shrink:0;}
.tab{flex:1;padding:12px 6px;text-align:center;color:#446644;font-size:.7rem;letter-spacing:.14em;text-transform:uppercase;cursor:pointer;border-bottom:3px solid transparent;margin-bottom:-2px;transition:all .15s;touch-action:auto;-webkit-tap-highlight-color:rgba(0,255,68,0.2);user-select:none;}
.tab.active{color:#00ff44;border-bottom-color:#00ff44;text-shadow:0 0 8px #00ff44;}
.tab:hover{color:#00cc33;}
#tab-content{padding:14px 20px 16px;overflow-y:auto;flex:1;min-height:0;touch-action:auto;}
.tab-pane{display:none;}.tab-pane.active{display:block;}
.ig{margin-bottom:10px;text-align:left;}
.ig label{color:#557755;font-size:.62rem;letter-spacing:.16em;text-transform:uppercase;display:block;margin-bottom:4px;}
.ig input{width:100%;padding:10px 12px;background:#080f08;border:1px solid #1a331a;color:#00ff44;font-family:'Courier New',monospace;font-size:.95rem;border-radius:3px;outline:none;transition:border-color .2s;touch-action:auto;}
.ig input:focus{border-color:#00ff44;}
.btn{width:100%;padding:12px;margin-top:8px;background:transparent;border:2px solid #00ff44;color:#00ff44;font-family:'Courier New',monospace;font-size:.82rem;font-weight:700;letter-spacing:.16em;text-transform:uppercase;cursor:pointer;border-radius:3px;transition:all .15s;touch-action:auto;-webkit-tap-highlight-color:rgba(0,255,68,0.3);display:block;}
.btn:hover,.btn:active{background:#00ff44;color:#000;box-shadow:0 0 20px rgba(0,255,68,.4);}
.btn.sec{border-color:#1a331a;color:#335533;}
.btn.sec:hover,.btn.sec:active{border-color:#00ff44;color:#00ff44;background:transparent;box-shadow:none;}
.cos-section{margin-bottom:14px;}
.cos-section-title{color:#446644;font-size:.62rem;letter-spacing:.18em;text-transform:uppercase;margin-bottom:7px;padding-bottom:4px;border-bottom:1px solid #1a331a;}
.cos-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;}
.cos-item{background:#080f08;border:2px solid #1a331a;border-radius:5px;padding:8px 2px 6px;text-align:center;cursor:pointer;transition:all .12s;-webkit-tap-highlight-color:rgba(0,255,68,0.2);touch-action:auto;user-select:none;}
.cos-item:hover{border-color:#2a5a2a;}
.cos-item.selected{border-color:#00ff44;background:rgba(0,255,68,.07);box-shadow:0 0 8px rgba(0,255,68,.2);}
.cos-icon{font-size:1.45rem;line-height:1.15;display:block;}
.cos-name{font-size:.5rem;letter-spacing:.07em;color:#446644;text-transform:uppercase;margin-top:3px;display:block;}
.cos-item.selected .cos-name{color:#00ff44;}
#hud{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;display:none;z-index:10;}
#crosshair{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:14px;height:14px;}
#crosshair::before,#crosshair::after{content:'';position:absolute;background:rgba(255,255,255,.6);}
#crosshair::before{width:2px;height:14px;left:6px;top:0;}
#crosshair::after{width:14px;height:2px;left:0;top:6px;}
#pcount{position:fixed;top:14px;right:14px;color:#00ff44;font-size:.72rem;letter-spacing:.1em;text-shadow:0 0 8px #00ff44;}
#lcode{position:fixed;top:14px;left:14px;color:#335533;font-size:.65rem;letter-spacing:.06em;}
#hint{position:fixed;bottom:14px;left:50%;transform:translateX(-50%);color:#2a472a;font-size:.58rem;letter-spacing:.1em;text-transform:uppercase;white-space:nowrap;}
#status{position:fixed;bottom:46px;left:50%;transform:translateX(-50%);color:#00ff44;font-size:.75rem;letter-spacing:.08em;text-shadow:0 0 8px #00ff44;opacity:0;transition:opacity .4s;text-transform:uppercase;background:rgba(0,0,0,.7);padding:5px 14px;border-radius:3px;white-space:nowrap;pointer-events:none;}
#menu-btn{position:fixed;top:10px;left:50%;transform:translateX(-50%);padding:6px 16px;background:rgba(0,18,0,0.85);border:1px solid #2a4a2a;color:#446644;font-family:'Courier New',monospace;font-size:.6rem;letter-spacing:.14em;text-transform:uppercase;cursor:pointer;border-radius:3px;pointer-events:all;transition:all .15s;display:none;z-index:60;-webkit-tap-highlight-color:rgba(0,255,68,0.2);touch-action:auto;}
#menu-btn:hover,#menu-btn:active{border-color:#00ff44;color:#00ff44;}
#chat-wrap{position:fixed;bottom:40px;left:14px;width:min(260px,55vw);pointer-events:none;display:none;z-index:55;}
#chat-messages{max-height:150px;overflow-y:auto;display:flex;flex-direction:column;gap:3px;padding-bottom:4px;scrollbar-width:none;}
#chat-messages::-webkit-scrollbar{display:none;}
.chat-msg{background:rgba(0,0,0,0.6);border-radius:3px;padding:3px 8px;font-size:.67rem;color:#aaffcc;letter-spacing:.04em;line-height:1.4;animation:fadeIn .2s ease;word-break:break-word;}
.chat-msg .cname{color:#00ff88;font-weight:700;}
.chat-msg.sys{color:#556655;font-style:italic;}
@keyframes fadeIn{from{opacity:0;transform:translateY(3px);}to{opacity:1;transform:none;}}
#chat-input-row{display:flex;gap:5px;margin-top:5px;pointer-events:all;touch-action:auto;}
#chat-input{flex:1;padding:7px 10px;background:rgba(0,12,0,0.9);border:1px solid #1a441a;color:#00ff44;font-family:'Courier New',monospace;font-size:.74rem;border-radius:3px;outline:none;touch-action:auto;}
#chat-input:focus{border-color:#00ff44;}
#chat-send{padding:7px 10px;background:transparent;border:1px solid #00ff44;color:#00ff44;font-family:'Courier New',monospace;font-size:.68rem;cursor:pointer;border-radius:3px;white-space:nowrap;touch-action:auto;}
#chat-send:active{background:#00ff44;color:#000;}
#chat-toggle-btn{position:fixed;bottom:140px;right:28px;width:56px;height:56px;border-radius:50%;background:rgba(0,25,0,0.88);border:2px solid rgba(0,200,80,0.5);color:#00ff88;font-size:1.3rem;display:none;align-items:center;justify-content:center;pointer-events:all;cursor:pointer;z-index:60;-webkit-tap-highlight-color:rgba(0,255,68,0.2);touch-action:auto;}
#chat-unread{position:absolute;top:-3px;right:-3px;background:#ff4444;color:#fff;font-size:.52rem;width:15px;height:15px;border-radius:50%;display:none;align-items:center;justify-content:center;font-weight:700;}
#mobile-controls{position:fixed;bottom:0;left:0;width:100%;height:100%;pointer-events:none;display:none;z-index:50;touch-action:none;}
#joy-zone{position:absolute;bottom:0;left:0;width:50%;height:100%;pointer-events:all;touch-action:none;}
#joy-base{position:absolute;width:110px;height:110px;border-radius:50%;background:rgba(255,255,255,0.07);border:2px solid rgba(255,255,255,0.2);transform:translate(-50%,-50%);display:none;}
#joy-stick{position:absolute;width:48px;height:48px;border-radius:50%;background:rgba(0,255,130,0.5);border:2px solid rgba(0,255,130,0.85);box-shadow:0 0 14px rgba(0,255,130,0.45);transform:translate(-50%,-50%);display:none;}
#look-zone{position:absolute;bottom:0;right:0;width:50%;height:100%;pointer-events:all;touch-action:none;}
#jump-btn{position:absolute;bottom:40px;right:28px;width:80px;height:80px;border-radius:50%;background:rgba(0,255,100,0.14);border:3px solid rgba(0,255,100,0.55);box-shadow:0 0 18px rgba(0,255,100,0.18);display:flex;align-items:center;justify-content:center;color:#00ff88;font-size:1.5rem;font-weight:900;pointer-events:all;transition:background .1s,transform .1s;-webkit-tap-highlight-color:transparent;user-select:none;touch-action:none;}
#jump-btn:active,#jump-btn.pressed{background:rgba(0,255,100,0.38);transform:scale(.92);}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="menu-overlay">
  <div id="menu-box">
    <div id="menu-title"><h1>ü¶ç Monkey Tag</h1><div class="sub">online ¬∑ multiplayer</div></div>
    <div id="tab-bar">
      <div class="tab active" data-tab="play">‚ñ∂ Play</div>
      <div class="tab" data-tab="cosmetics">‚ú® Look</div>
    </div>
    <div id="tab-content">
      <div class="tab-pane active" id="tab-play">
        <div class="ig"><label>Your Name</label><input type="text" id="nameInput" placeholder="Enter name..." maxlength="16" value="Monkey"></div>
        <button class="btn" id="joinPublicBtn">‚ñ∂ Join Public Lobby</button>
        <button class="btn sec" id="hostBtn">‚äï Host Private Lobby</button>
        <div id="privateBox" style="display:none;margin-top:10px;">
          <div class="ig"><label>Lobby Code</label><input type="text" id="codeInput" placeholder="Enter code..." maxlength="8"></div>
          <button class="btn" id="joinPrivBtn">‚Üí Join Private</button>
        </div>
      </div>
      <div class="tab-pane" id="tab-cosmetics">
        <div class="cos-section"><div class="cos-section-title">üé© Hats</div><div class="cos-grid" id="hat-grid"></div></div>
        <div class="cos-section"><div class="cos-section-title">üï∂ Glasses</div><div class="cos-grid" id="glasses-grid"></div></div>
        <div class="cos-section"><div class="cos-section-title">üé≠ Masks</div><div class="cos-grid" id="mask-grid"></div></div>
      </div>
    </div>
  </div>
</div>
<div id="hud">
  <div id="crosshair"></div><div id="pcount">Players: 1</div><div id="lcode"></div>
  <div id="hint">WASD ¬∑ Move &nbsp;|&nbsp; SPACE ¬∑ Jump &nbsp;|&nbsp; RMB ¬∑ Look &nbsp;|&nbsp; T ¬∑ Chat</div>
  <div id="status"></div>
  <button id="menu-btn">‚ò∞ Menu</button>
</div>
<div id="chat-wrap">
  <div id="chat-messages"></div>
  <div id="chat-input-row">
    <input type="text" id="chat-input" placeholder="Say something..." maxlength="80" autocomplete="off">
    <button id="chat-send">Send</button>
  </div>
</div>
<div id="chat-toggle-btn">üí¨<div id="chat-unread"></div></div>
<div id="mobile-controls">
  <div id="joy-zone"><div id="joy-base"></div><div id="joy-stick"></div></div>
  <div id="look-zone"></div>
  <div id="jump-btn">‚ñ≤</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
